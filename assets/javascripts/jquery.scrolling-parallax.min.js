!function(e){e.scrollingParallax=function(t,i){function r(t){return"string"==typeof t?p=a(t):(p=e(t),p.css("position",c?"absolute":"fixed"),i.enableVertical&&(m=parseInt(p.css("top"))),i.enableHorizontal&&(V=parseInt(p.css("left")))),i.disableIE6Anim&&c?!1:(o(),f&&(i.reverseDirection&&i.enableVertical&&(m+=-1*I,p.css("top",m)),i.reverseDirectionX&&i.enableHorizontal&&(V+=-1*y,p.css("left",V))),b.scroll(function(){l()}),b.resize(function(){o()}),void 0)}function a(t){var r={display:"block",top:0,left:0,width:i.bgWidth,height:i.bgHeight,zIndex:0};if(r.position=c?"absolute":"fixed",i.bgRepeat){var a=i.appendInFront?e("<div></div>").appendTo(e("body")):e("<div></div>").prependTo(e("body"));r.backgroundRepeat="repeat",r.backgroundImage='url("'+t+'")'}else{var a=i.appendInFront?e("<img />").appendTo(e("body")):e("<img />").prependTo(e("body"));a.attr("src",t)}return a.css(r),f=!0,a}function o(){i.enableVertical&&(v=p.height(),u=b.height(),h=d.height(),I=(i.parallaxHeight||v)-u,0>I&&(I=i.staticSpeed?u-v:i.reverseDirection?u-m-v:m,X=!0),c&&!g&&(g=-1*(h-v)),i.loopIt&&(S=parseInt(d.scrollTop()/(X?u:v)))),i.enableHorizontal&&(H=p.width(),x=b.width(),L=d.width(),y=(i.parallaxWidth||H)-x,0>y&&(y=i.staticSpeedX?x-H:i.reverseDirectionX?x-V-H:V,E=!0),c&&!z&&(z=-1*(L-H)),i.loopItX&&(w=parseInt(d.scrollLeft()/(E?x:H)))),l()}function l(){p.queue([]);var t={};if(i.enableVertical){var r=n(!0);t.top=r}if(i.enableHorizontal){var a=n(!1);t.left=a}!e.browser.msie&&(Math.abs(D-r)>100||Math.abs(T-a)>100)?p.animate(t,30):p.css(t),D=r,T=a}function n(e){if(e)var t=d.scrollTop(),r=h,a=u,o=v,l=I,n=S,p=m,l=I,b=X,f=g,D={reverseDirection:i.reverseDirection,staticSpeed:i.staticSpeed,loopIt:i.loopIt,staticScrollLimit:i.staticScrollLimit};else var t=d.scrollLeft(),r=L,a=x,o=H,n=w,p=V,l=y,b=E,f=z,D={reverseDirection:i.reverseDirectionX,staticSpeed:i.staticSpeedX,loopIt:i.loopItX,staticScrollLimit:i.staticScrollLimitX};if(D.staticSpeed){var T=t*D.staticSpeed;T-=l*n}else var W=t/(r-a),T=W*l;return D.reverseDirection||(T*=-1),T+=p,D.staticSpeed&&(T=s(T,e,D,l,b)),b&&D.staticSpeed&&D.loopIt&&(T+=a-o),c&&(T+=t,T=Math.max(parseInt(T),parseInt(f))),T}function s(e,t,i,r,a){if(i.loopIt){for(;r>e;){e+=r;var o=i.reverseDirection?-1:1;t?S+=o:w+=o}for(;e>(i.reverseDirection?-1:0);){e-=r;var o=i.reverseDirection?-1:1;t?S-=o:w-=o}}else i.staticScrollLimit&&(a?(0>e&&(e=0),e>r&&(e=r)):(e>0&&(e=0),-1*e>r&&(e=-1*r)));return e}var i=i||{};i.enableVertical="undefined"!=typeof i.enableVertical?i.enableVertical:!0,i.enableVertical&&(i.staticSpeed=i.staticSpeed||!1,i.staticScrollLimit="undefined"!=typeof i.staticScrollLimit?i.staticScrollLimit:!0,i.loopIt=i.loopIt||!1,i.reverseDirection=i.reverseDirection||!1),i.enableHorizontal=i.enableHorizontal||!1,i.enableHorizontal&&(i.staticSpeedX=i.staticSpeedX||!1,i.staticScrollLimitX="undefined"!=typeof i.staticScrollLimitX?i.staticScrollLimitX:!0,i.loopItX=i.loopItX||!1,i.reverseDirectionX=i.reverseDirectionX||!1),i.disableIE6=i.disableIE6||!1,i.disableIE6Anim="undefined"!=typeof i.disableIE6Anim?i.disableIE6Anim:!0,i.bgWidth=i.bgWidth||(i.enableHorizontal?"150%":"100%"),i.bgHeight=i.bgHeight||"150%",i.bgRepeat=i.bgRepeat||!1,i.appendInFront=i.appendInFront||!1,i.parallaxHeight=i.parallaxHeight||!1,i.parallaxWidth=i.parallaxWidth||!1;var c=e.browser.msie&&e.browser.version<7?!0:!1;if(i.disableIE6&&c)return!1;var p,d=e(document),b=e(window),f=!1;if(i.enableVertical)var v,u,h,I,g=0,S=0,m=0,X=!1,D=null;if(i.enableHorizontal)var H,x,L,y,z=0,w=0,V=0,E=!1,T=null;r(t)},e.fn.scrollingParallax=function(t){return this.each(function(){new e.scrollingParallax(this,t)}),this}}(jQuery);